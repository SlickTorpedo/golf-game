<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Golf Masters</title>
    <link rel="stylesheet" href="styles.css?v=3">
    <link rel="stylesheet" href="volume-controls.css">
    <link rel="stylesheet" href="notifications.css">
    <link rel="stylesheet" href="game-ui.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Main Menu -->
    <div id="main-menu" class="screen active">
        <div class="menu-container">
            <h1 class="game-title">‚õ≥ Mini Golf Masters</h1>
            <div class="menu-card">
                <div class="input-group">
                    <label for="player-name">Player Name</label>
                    <input type="text" id="player-name" placeholder="" maxlength="20">
                </div>
                <div class="menu-buttons">
                    <button id="create-room-btn" class="btn btn-primary">Create Room</button>
                    <button id="join-room-btn" class="btn btn-secondary">Join Room</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Join Room Screen -->
    <div id="join-room-screen" class="screen">
        <div class="menu-container">
            <h2 class="screen-title">Join Room</h2>
            <div class="menu-card">
                <div class="input-group">
                    <label for="room-code">Room Code</label>
                    <input type="text" id="room-code" placeholder="Enter 6-digit code" maxlength="6">
                </div>
                <div class="menu-buttons">
                    <button id="join-confirm-btn" class="btn btn-primary">Join</button>
                    <button id="join-back-btn" class="btn btn-secondary">Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Lobby Screen -->
    <div id="lobby-screen" class="screen">
        <div class="lobby-container">
            <h2 class="screen-title">Game Lobby</h2>
            <div class="lobby-card">
                <div class="room-info">
                    <div class="room-code-display">
                        <span>Room Code:</span>
                        <strong id="display-room-code">------</strong>
                    </div>
                </div>
                <div class="players-section">
                    <h3>Players (<span id="player-count">0</span>/4)</h3>
                    <div id="player-list" class="player-list"></div>
                </div>
                <div class="lobby-buttons">
                    <button id="start-game-btn" class="btn btn-primary" disabled>Start Game</button>
                    <button id="leave-room-btn" class="btn btn-secondary">Leave Room</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <!-- Game Canvas Container -->
        <div id="game-canvas"></div>
        
        <!-- In-Game HUD -->
        <div id="game-hud">
            <!-- Active Effects Bar -->
            <div id="active-effects-bar" class="active-effects-bar">
                <!-- Effects will be added dynamically -->
            </div>

            <!-- Top Bar -->
            <div class="hud-top">
                <div class="hud-info">
                    <div class="info-item">
                        <span class="label">Hole</span>
                        <span class="value" id="current-hole">1/9</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Strokes</span>
                        <span class="value" id="stroke-count">0</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Par</span>
                        <span class="value" id="par-value">3</span>
                    </div>
                </div>
                <div class="hud-current-player">
                    <span id="turn-indicator">Your Turn</span>
                </div>
            </div>

            <!-- Top Right - Camera -->
            <div class="hud-top-right">
                <div class="camera-control">
                    <button id="camera-btn" class="camera-btn">
                        <span class="camera-icon">üì∑</span>
                        <span id="camera-mode" class="camera-mode">Camera 1</span>
                    </button>
                </div>
            </div>

            <!-- Scoreboard Toggle (Bottom Left) -->
            <div class="hud-bottom-left">
                <button id="scoreboard-toggle-btn" class="scoreboard-toggle-btn" title="Scoreboard">
                    üèÜ
                </button>
                <div id="scoreboard-panel" class="scoreboard-panel">
                    <div class="scoreboard">
                        <h3>Scoreboard</h3>
                        <div id="scoreboard-list"></div>
                    </div>
                </div>
            </div>

            <!-- Power-Ups (Bottom Center) -->
            <div class="hud-bottom-center">
                <div class="power-ups">
                    <div id="active-powerup-indicator" class="active-powerup-indicator" style="display: none;">
                        <span id="active-powerup-text"></span>
                    </div>
                    <div id="powerup-slots" class="powerup-slots">
                        <div class="powerup-slot empty"></div>
                        <div class="powerup-slot empty"></div>
                        <div class="powerup-slot empty"></div>
                    </div>
                </div>
            </div>


        </div>
    </div>

    <!-- Map Selection Modal -->
    <div id="map-selection-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Select Map</h2>
            <div id="map-selection-list" class="map-selection-list"></div>
            <button id="map-selection-cancel" class="btn btn-secondary">Cancel</button>
        </div>
    </div>

    <!-- Player Selection Modal -->
    <div id="player-selection-modal" class="player-selection-modal" style="display: none;">
        <div class="player-selection-content">
            <h3>Choose Target Player</h3>
            <p class="powerup-description"></p>
            <div id="player-selection-list" class="player-selection-list">
                <!-- Players will be added dynamically -->
            </div>
            <button id="cancel-powerup" class="btn btn-secondary">Cancel</button>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification"></div>

    <!-- Audio -->
    <audio id="lobby-music" loop>
        <source src="/music/lobby_music.mp3" type="audio/mpeg">
    </audio>
    <audio id="game-music" loop>
        <source src="/music/game_music.mp3" type="audio/mpeg">
    </audio>
    <audio id="player-joined-sfx">
        <source src="/sounds/player_join.mp3" type="audio/mpeg">
    </audio>
    <audio id="player-left-sfx">
        <source src="/sounds/player_leave.mp3" type="audio/mpeg">
    </audio>
    <audio id="ball-hit-sfx">
        <source src="/sounds/ball_hit.mp3" type="audio/mpeg">
    </audio>
    <audio id="ball-whoosh-sfx">
        <source src="/sounds/ball_whoosh.mp3" type="audio/mpeg">
    </audio>
    <audio id="score-sfx">
        <source src="/sounds/score.mp3" type="audio/mpeg">
    </audio>
    <audio id="game-finished-sfx">
        <source src="/sounds/game_finished.mp3" type="audio/mpeg">
    </audio>
    <audio id="pickup-sfx">
        <source src="/sounds/pickup.mp3" type="audio/mpeg">
    </audio>
    <audio id="boost-sfx">
        <source src="/sounds/boost.mp3" type="audio/mpeg">
    </audio>
    <audio id="bounce-sfx">
        <source src="/sounds/bounce.mp3" type="audio/mpeg">
    </audio>
    <audio id="bump-sfx">
        <source src="/sounds/bump.mp3" type="audio/mpeg">
    </audio>
    <audio id="collision-sfx">
        <source src="/sounds/collision.mp3" type="audio/mpeg">
    </audio>
    <audio id="burn-sfx">
        <source src="/sounds/burn.mp3" type="audio/mpeg">
    </audio>

    <!-- Volume Control Panel -->
    <div id="volume-panel" class="volume-panel">
        <button id="volume-toggle-btn" class="volume-toggle-btn">üîä</button>
        <div id="volume-controls" class="volume-controls">
            <h3>Audio Settings</h3>
            <div class="volume-control-group">
                <label for="master-volume">
                    <span>Master Volume</span>
                    <span id="master-volume-value">100%</span>
                </label>
                <input type="range" id="master-volume" min="0" max="100" value="100">
            </div>
            <div class="volume-control-group">
                <label for="music-volume">
                    <span>Music Volume</span>
                    <span id="music-volume-value">30%</span>
                </label>
                <input type="range" id="music-volume" min="0" max="100" value="30">
            </div>
            <div class="volume-control-group">
                <label for="sfx-volume">
                    <span>SFX Volume</span>
                    <span id="sfx-volume-value">70%</span>
                </label>
                <input type="range" id="sfx-volume" min="0" max="100" value="70">
            </div>
        </div>
    </div>

    <!-- Socket.io client -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Three.js -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <!-- Game script -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
